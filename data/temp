fetch ("https://gta1.growingio.com/_private/v4/projects/nRbjyEdR/chartdata",{method:"post",headers:{"Content-Type":"application/json"},body:'{"type":"retention","timeRange":"day:15,1","attrs":{"userType":"usv","range":"day"},"metrics":[{"id":"retentionuv","type":"prepared","filter":{"op":"and","exprs":[{"op":"=","key":"b","values":["微信小程序"],"name":"应用平台"}]}},{"id":"retentionuv","type":"prepared","filter":{"op":"and","exprs":[{"op":"=","key":"b","values":["微信小程序"],"name":"应用平台"}]},"attribute":null,"name":"任意行为"}],"dimensions":["action"],"granularities":[{"id":"tm","interval":86400000},{"id":"action","levels":[{"type":"feature","excluded":false,"metric":{"id":"retentionuv","type":"prepared","filter":{"op":"and","exprs":[{"op":"=","key":"b","values":["微信小程序"],"name":"应用平台"}]},"attribute":null,"name":"任意行为"}},{"type":"feature","excluded":false,"metric":{"id":"woVaBlkP","name":"加入购物车","type":"custom","valueType":"counter","platforms":["all"],"attributes":[{"id":"39lEd5R2","name":"一级品类","valueType":"string"},{"id":"lPQjMWop","name":"二级品类","valueType":"string"},{"id":"L9GX6dR6","name":"加购来源","valueType":"string"},{"id":"YoXgVMPq","name":"商品code","valueType":"string"},{"id":"rREZ21PL","name":"商品名称","valueType":"string"}],"aggregator":"count","filter":{}}},{"type":"feature","excluded":false,"metric":{"id":"j9yB73rR","name":"领取优惠券","type":"custom","valueType":"counter","platforms":["all"],"attributes":[{"id":"Yo1Vrw9l","name":"优惠券名称","valueType":"string"},{"id":"xogKvvom","name":"优惠券渠道","valueType":"string"}],"aggregator":"count","filter":{}}}]}]}'}).then(r=>r.json()).then(data=>{
   data=data.data.filter(d=>d[2]==0)
   console.log(data)
   data=data.map((d,i,arr)=>{
   return {function_name:d[1],usage_count:d[3],retention:d[7],usage_rate:i==0?1:d[3]/arr[0][3]}
    })
   console.log(data)
})